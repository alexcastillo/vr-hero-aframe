<a-scene (click)="clicks.next()">

  <a-sky starnest></a-sky>

  <a-box *ngFor="let line of lines; let i = index" depth="20" height="0.1" width="0.2" [attr.color]="line"
    [attr.position]="{x:i-3, y:2.5, z:-13}|aframe"></a-box>

  <a-entity *ngFor="let sphere of spheres" position="0 0 -23">
    <a-sphere [attr.position]="{x:sphere.stringId-3, y:3, z:0}|aframe" radius="0.5" [attr.fireball]="{brightness: 1.5, color: sphere.color}|aframe">
      <a-entity [attr.text-geometry]="{value: sphere.fret}|aframe" position="0 0.5 0" material="emissive: white">
      </a-entity>
      <a-sphere radius="0.65" opacity="0.5" [attr.material]="{color: '#5eff5e', emissive: 'green', emissiveIntensity: 0.2, metalness: 1, roughness: 0.61, visible: sphere.match}|aframe"></a-sphere>
      <a-animation attribute="fireball.opacity" dur="500" to="0" *ngIf="sphere.endOfTrack && !sphere.match" (animationend)="removeSphere(sphere)"></a-animation>
    </a-sphere>
    <a-animation attribute="position" dur="2500" to="0 0 -3" easing="linear" (animationend)="updateAnimation(sphere)"></a-animation>
    <a-animation attribute="position" delay="500" dur="1000" *ngIf="sphere.endOfTrack && sphere.match" from="0 0 -3" to="0 999 -3"
      (animationend)="removeSphere(sphere)"></a-animation>
  </a-entity>

  <a-box *ngFor="let user of users; let i = index" depth="0.2" height="0.1" width="0.2" [attr.color]="user.color" [attr.position]="user.position"></a-box>

</a-scene>
